<!DOCTYPE html><html>
  <head>
    <title>Gravitule</title>
  </head>
  <body>
    <canvas id="content" width="800" height="600"></canvas>
    <script>
      function $(a){return document.getElementById(a)}

      let canvas = $("content");
      let ctx = canvas.getContext("2d");
      let circles = [];
      class circle{
        constructor(x,y,r,fill){
          this.x = x;
          this.y = y;
          this.r = r;
          this.angle = 0;
          this.fill = fill;
          circles = [...circles, this];
        }
        draw(){
          ctx.beginPath();
          ctx.arc(this.x,this.y,this.r,0,2*Math.PI);
          ctx.fillStyle = this.fill;
          ctx.fill();
        }
        attract(x,y,stopDist){
          let angle = Math.atan2(y-this.y,x-this.x);
          this.angle = angle;
          function moveLoop(){
            let dist = Math.sqrt( Math.pow(Math.abs(this.x - x),2) + Math.pow(Math.abs(this.y - y),2) )
            if(dist > stopDist)return;
            this.x+=Math.cos(this.angle);
            this.y+=Math.cos(this.angle);
            setTimeout(moveLoop,2);
          }
          moveLoop();
        }
      }
      //let angle = Math.atan2(y2-y1,x2-x1) * 180/Math.PI;
      let c1 = new circle(400,300,10,"red");
      let c2 = new circle(100,100,30,"orange");
      c1.attract
      function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        circles.forEach(circle => {circle.draw();});
        setTimeout(draw,2);
      }
      draw();
    </script>
  </body>
</html>
